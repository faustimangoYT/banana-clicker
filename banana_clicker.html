<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Banana Clicker</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      font-family: Arial, sans-serif;
      background-color: #FFFFFF;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      overflow: hidden;
      position: relative;
    }

    #splash {
      position: absolute;
      width: 100%;
      height: 100%;
      background-color: #70caee;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 32px;
      z-index: 10;
    }

    #login {
      margin-top: 20px;
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    #gameContainer {
      width: 1024px;
      height: 1024px;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background-color: #70caee;
      position: relative;
    }

    #counter {
      font-size: 30px;
      margin-bottom: 20px;
      color: white;
    }

    #banana {
      width: 300px;
      height: 300px;
      object-fit: contain;
      cursor: pointer;
    }

    input {
      padding: 10px;
      font-size: 16px;
      border-radius: 5px;
      border: none;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: #222;
      color: #fff;
      font-weight: bold;
    }

    #info {
      margin-top: 15px;
      color: black;
      font-size: 14px;
      text-align: center;
    }

    #scoreboardBtn {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: orange;
    }

    #restartBtn {
      margin-top: 10px;
      background-color: cyan;
    }

    #scoreboard {
      position: absolute;
      top: 60px;
      right: 10px;
      background-color: white;
      color: black;
      padding: 10px;
      border-radius: 5px;
      display: none;
      max-height: 200px;
      overflow-y: auto;
    }

    #message {
      position: fixed;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(0,0,0,0.8);
      color: white;
      padding: 15px 25px;
      border-radius: 10px;
      font-size: 16px;
      display: none;
      z-index: 20;
    }
  </style>
</head>
<body>

  <div id="splash">Creado por Fausti</div>

  <div id="login">
    <input type="text" id="username" placeholder="Coloca un nombre (5-16 letras)">
    <button onclick="startGame()">Continuar</button>
    <div id="info">
      YouTube: <a href="https://www.youtube.com/@faustimango_YT" target="_blank" style="color:black;">@faustimango_YT</a><br>
      Soporte: <a href="mailto:soporte.faustimango.juegos@gmail.com" style="color:black;">soporte.faustimango.juegos@gmail.com</a>
    </div>
  </div>

  <div id="gameContainer">
    <div id="counter">Clicks: 0</div>
    <img id="banana" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Banana-Single.jpg/2324px-Banana-Single.jpg" alt="Banana">
    <button id="restartBtn" onclick="reiniciarProgreso()">Reiniciar progreso</button>
    <button id="scoreboardBtn" onclick="toggleScoreboard()">Scoreboard</button>
    <div id="scoreboard"></div>
  </div>

  <div id="message"></div>

  <script>
    let clicks = 0;
    const splash = document.getElementById('splash');
    const login = document.getElementById('login');
    const game = document.getElementById('gameContainer');
    const counter = document.getElementById('counter');
    const banana = document.getElementById('banana');
    const usernameInput = document.getElementById('username');
    const messageBox = document.getElementById('message');
    const scoreboard = document.getElementById('scoreboard');

    function showMessage(text) {
      messageBox.textContent = text;
      messageBox.style.display = "block";
      setTimeout(() => {
        messageBox.style.display = "none";
      }, 3000);
    }

    function loadClicks(user) {
      const saved = localStorage.getItem("clicks_" + user);
      clicks = saved ? parseInt(saved) : 0;
      counter.textContent = "Clicks: " + clicks;
    }

    banana.addEventListener("click", () => {
      clicks++;
      counter.textContent = "Clicks: " + clicks;
      const user = usernameInput.value;
      localStorage.setItem("clicks_" + user, clicks);
      updateScoreboard(user, clicks);
    });

    function startGame() {
      const user = usernameInput.value.trim();
      if (user.length < 5 || user.length > 16) {
        showMessage("El nombre debe tener entre 5 y 16 caracteres");
        return;
      }

      login.style.display = "none";
      game.style.display = "flex";
      loadClicks(user);
      updateScoreboard(user, clicks);
    }

    function reiniciarProgreso() {
      const user = usernameInput.value;
      clicks = 0;
      counter.textContent = "Clicks: 0";
      localStorage.setItem("clicks_" + user, 0);
      updateScoreboard(user, 0);
      showMessage("Tu progreso ha sido reiniciado.");
    }

    function toggleScoreboard() {
      if (scoreboard.style.display === "none") {
        renderScoreboard();
        scoreboard.style.display = "block";
      } else {
        scoreboard.style.display = "none";
      }
    }

    function updateScoreboard(user, clicks) {
      localStorage.setItem("clicks_" + user, clicks);
    }

    function renderScoreboard() {
      const entries = [];
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith("clicks_")) {
          const username = key.replace("clicks_", "");
          const score = parseInt(localStorage.getItem(key));
          entries.push({ username, score });
        }
      }

      entries.sort((a, b) => b.score - a.score);
      scoreboard.innerHTML = "<strong>Top Jugadores</strong><br><br>" + entries.map(e => `${e.username}: ${e.score}`).join("<br>");
    }

    // Mostrar splash por 5 segundos
    setTimeout(() => {
      splash.style.display = "none";
      login.style.display = "flex";
    }, 5000);
  </script>
</body>
</html>
